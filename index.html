<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Retraite, une Seconde Vie - Programme Interactif</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #2c5f49;
            --secondary-color: #7fb069;
            --accent-color: #d4a574;
            --background: #faf8f5;
            --text-dark: #2d3436;
            --text-light: #636e72;
            --border: #ddd;
            --success: #00b894;
            --warning: #fdcb6e;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, var(--background) 0%, #f5f3f0 100%);
            color: var(--text-dark);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            padding: 40px 0;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            margin-bottom: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
            font-style: italic;
        }

        .progress-bar {
            background: white;
            height: 20px;
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--secondary-color), var(--accent-color));
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        .chapter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .chapter-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 2px solid transparent;
            cursor: pointer;
        }

        .chapter-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }

        .chapter-card.completed {
            border-color: var(--success);
            background: linear-gradient(135deg, #f8fff8 0%, #e8f5e8 100%);
        }

        .chapter-card.current {
            border-color: var(--accent-color);
            background: linear-gradient(135deg, #fff9f0 0%, #fef4e8 100%);
        }

        .chapter-number {
            background: var(--primary-color);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .chapter-card.completed .chapter-number {
            background: var(--success);
        }

        .chapter-card.current .chapter-number {
            background: var(--accent-color);
        }

        .chapter-title {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .chapter-description {
            color: var(--text-light);
            font-size: 0.95em;
            margin-bottom: 15px;
        }

        .exercise-status {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.9em;
        }

        .status-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.8em;
        }

        .status-icon.completed {
            background: var(--success);
        }

        .status-icon.current {
            background: var(--accent-color);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 40px;
            border-radius: 20px;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .modal-header {
            border-bottom: 2px solid var(--border);
            padding-bottom: 20px;
            margin-bottom: 30px;
        }

        .modal-title {
            font-size: 1.8em;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 2em;
            cursor: pointer;
            color: var(--text-light);
            transition: color 0.3s ease;
        }

        .close-btn:hover {
            color: var(--text-dark);
        }

        .exercise-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid var(--accent-color);
        }

        .exercise-title {
            font-size: 1.3em;
            color: var(--primary-color);
            margin-bottom: 15px;
            font-weight: bold;
        }

        .question-group {
            margin: 20px 0;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .question-label {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 10px;
            display: block;
        }

        textarea {
            width: 100%;
            min-height: 120px;
            padding: 15px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-family: inherit;
            font-size: 14px;
            resize: vertical;
            transition: border-color 0.3s ease;
        }

        textarea:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 10px rgba(127, 176, 105, 0.2);
        }

        .btn {
            background: var(--primary-color);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s ease;
            margin: 10px 5px;
        }

        .btn:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: var(--text-light);
        }

        .btn-secondary:hover {
            background: var(--text-dark);
        }

        .btn-success {
            background: var(--success);
        }

        .btn-export {
            background: var(--accent-color);
        }

        .stats-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .stat-card {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, var(--background) 0%, #f0f0f0 100%);
            border-radius: 10px;
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: var(--primary-color);
        }

        .stat-label {
            color: var(--text-light);
            font-size: 0.9em;
            margin-top: 5px;
        }

        .tips-section {
            background: linear-gradient(135deg, #fff9f0 0%, #fef4e8 100%);
            padding: 25px;
            border-radius: 15px;
            margin: 30px 0;
            border: 2px solid var(--accent-color);
        }

        .tips-title {
            color: var(--primary-color);
            font-size: 1.3em;
            margin-bottom: 15px;
        }

        ul {
            padding-left: 20px;
        }

        li {
            margin: 8px 0;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .modal-content {
                margin: 20px;
                padding: 20px;
                max-width: calc(100% - 40px);
            }
            
            .chapter-grid {
                grid-template-columns: 1fr;
            }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="fade-in">
            <h1>La Retraite, une Seconde Vie</h1>
            <p class="subtitle">Un dialogue pour r√©inventer son avenir - Programme Interactif</p>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <p>Progression: <span id="progressText">0/10 chapitres compl√©t√©s</span></p>
        </header>

        <div class="stats-section fade-in">
            <h2>Vos statistiques</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="completedChapters">0</div>
                    <div class="stat-label">Chapitres compl√©t√©s</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalReflections">0</div>
                    <div class="stat-label">R√©flexions enregistr√©es</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="daysActive">1</div>
                    <div class="stat-label">Jours d'activit√©</div>
                </div>
            </div>
        </div>

        <div class="tips-section fade-in">
            <h3 class="tips-title">üí° Conseils pour utiliser cette application</h3>
            <ul>
                <li>Prenez votre temps avec chaque exercice - la qualit√© prime sur la rapidit√©</li>
                <li>Soyez honn√™te dans vos r√©flexions, c'est pour vous</li>
                <li>Revenez r√©guli√®rement sur vos r√©ponses pr√©c√©dentes pour voir votre √©volution</li>
                <li>N'h√©sitez pas √† exporter vos donn√©es pour les sauvegarder</li>
                <li>Chaque petit pas compte dans votre transformation</li>
            </ul>
        </div>

        <div class="chapter-grid" id="chapterGrid">
            <!-- Les chapitres seront g√©n√©r√©s par JavaScript -->
        </div>

        <div class="stats-section">
            <button class="btn btn-export" onclick="exportData()">üìã Exporter mes r√©ponses</button>
            <button class="btn btn-secondary" onclick="resetData()">üîÑ Recommencer</button>
        </div>
    </div>

    <!-- Modal pour les exercices -->
    <div id="exerciseModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle"></h2>
                <p id="modalDescription"></p>
            </div>
            <div id="modalContent"></div>
        </div>
    </div>

    <script>
        // Structure des donn√©es des chapitres
        const chapters = [
            {
                id: 1,
                title: "Le Grand Vide ou le Champ des Possibles ?",
                description: "Cartographier votre point de d√©part et observer votre √©tat actuel",
                exercise: {
                    title: "Votre Journal de Bord ‚Äì Cartographier le Point de D√©part",
                    objective: "Prendre conscience de votre √©tat actuel sans jugement, et commencer √† identifier les contours de votre transition.",
                    questions: [
                        {
                            label: "La M√©t√©o Int√©rieure - Comment vous sentez-vous aujourd'hui ?",
                            key: "meteo_interieure",
                            placeholder: "D√©crivez vos √©motions : joie, tristesse, col√®re, anxi√©t√©, ennui, s√©r√©nit√©, confusion, etc."
                        },
                        {
                            label: "Le Poids du Pass√© - Qu'est-ce qui vous a manqu√© de votre ancienne vie aujourd'hui ?",
                            key: "poids_passe",
                            placeholder: "Pensez aux aspects concrets ou immat√©riels qui vous manquent..."
                        },
                        {
                            label: "La L√©g√®ret√© du Pr√©sent - De quoi √™tes-vous heureux de vous √™tre d√©barrass√© ?",
                            key: "legerete_present",
                            placeholder: "Stress, trajets, r√©unions, pressions... C√©l√©brez ces lib√©rations"
                        }
                    ]
                }
            },
            {
                id: 2,
                title: "Dire au revoir pour mieux se retrouver",
                description: "Faire le deuil de votre identit√© professionnelle et honorer votre pass√©",
                exercise: {
                    title: "La Lettre de Transition",
                    objective: "Honorer votre pass√©, exprimer les √©motions associ√©es et marquer symboliquement la fin d'un cycle.",
                    questions: [
                        {
                            label: "Lettre de gratitude - Remerciez votre ancienne carri√®re/vie",
                            key: "lettre_gratitude",
                            placeholder: "Ch√®re Carri√®re... Merci pour tout ce que tu m'as apport√©..."
                        },
                        {
                            label: "Les griefs et regrets - Exprimez ce que cette relation vous a co√ªt√©",
                            key: "griefs_regrets",
                            placeholder: "Je t'en veux pour... Je regrette... Je pardonne..."
                        },
                        {
                            label: "L'adieu - Annoncez clairement que ce chapitre est termin√©",
                            key: "adieu",
                            placeholder: "Aujourd'hui, nos chemins se s√©parent... Je te dis au revoir et..."
                        }
                    ]
                }
            },
            {
                id: 3,
                title: "Les Cartes Routi√®res de notre Esprit",
                description: "Identifier et transformer vos croyances limitantes",
                exercise: {
                    title: "Devenir l'Architecte de ses Croyances",
                    objective: "Identifier une croyance limitante et la transformer en croyance aidante.",
                    questions: [
                        {
                            label: "Croyance limitante - Quelle r√®gle vous emp√™che d'avancer ?",
                            key: "croyance_limitante",
                            placeholder: "Je ne peux pas... parce que... / Il est trop tard pour..."
                        },
                        {
                            label: "D√©construction - D'o√π vient cette croyance ? Est-elle vraie √† 100% ?",
                            key: "deconstruction",
                            placeholder: "Origine, validit√©, co√ªt de cette croyance..."
                        },
                        {
                            label: "Nouvelle croyance - Formulez une croyance plus aidante",
                            key: "nouvelle_croyance",
                            placeholder: "D√©sormais, je crois que... J'ai le droit de..."
                        }
                    ]
                }
            },
            {
                id: 4,
                title: "L'Art de Vivre, Ici et Maintenant",
                description: "D√©velopper la pleine conscience et l'ancrage dans le pr√©sent",
                exercise: {
                    title: "L'Ancre de Pleine Conscience",
                    objective: "Cr√©er un √Ælot de calme quotidien en vous ancrant dans le pr√©sent.",
                    questions: [
                        {
                            label: "Activit√© choisie - Quelle activit√© quotidienne sera votre ancre ?",
                            key: "activite_ancre",
                            placeholder: "Boire le caf√© du matin, se brosser les dents, marcher..."
                        },
                        {
                            label: "Exp√©rience sensorielle - Comment cette activit√© engage-t-elle vos 5 sens ?",
                            key: "experience_sensorielle",
                            placeholder: "Vue, toucher, odorat, go√ªt, ou√Øe - d√©crivez vos sensations"
                        },
                        {
                            label: "R√©flections - Comment cette pratique change-t-elle votre rapport au quotidien ?",
                            key: "reflexions_pleine_conscience",
                            placeholder: "Difficult√©s rencontr√©es, nouvelles observations, bienfaits..."
                        }
                    ]
                }
            },
            {
                id: 5,
                title: "√Ä la recherche de son Nord int√©rieur",
                description: "Explorer vos passions et talents pour d√©couvrir votre Ikiga√Ø",
                exercise: {
                    title: "L'Arch√©ologie de votre Ikiga√Ø (Partie 1)",
                    objective: "Identifier vos passions profondes et vos talents uniques.",
                    questions: [
                        {
                            label: "Ce que j'aime - Vos passions et centres d'int√©r√™t",
                            key: "passions",
                            placeholder: "Ce qui vous fait vibrer, perdre la notion du temps, vous passionne..."
                        },
                        {
                            label: "Ce pour quoi je suis dou√©(e) - Vos talents naturels",
                            key: "talents",
                            placeholder: "Ce que vous faites facilement, vos comp√©tences reconnues..."
                        },
                        {
                            label: "D√©couvertes - Qu'avez-vous red√©couvert sur vous-m√™me ?",
                            key: "decouvertes",
                            placeholder: "Talents oubli√©s, passions d'enfance retrouv√©es..."
                        }
                    ]
                }
            },
            {
                id: 6,
                title: "R√©v√©ler le Super-H√©ros en Sommeil",
                description: "Identifier et activer vos forces de caract√®re",
                exercise: {
                    title: "Mettez votre Cape de Super-H√©ros",
                    objective: "Identifier vos forces de caract√®re et les utiliser consciemment.",
                    questions: [
                        {
                            label: "Mes 5 forces principales - Identifiez vos forces de caract√®re signatures",
                            key: "forces_caractere",
                            placeholder: "Cr√©ativit√©, gentillesse, pers√©v√©rance, curiosit√©, humour..."
                        },
                        {
                            label: "Forces en action - D√©crivez des moments o√π vous avez utilis√© ces forces",
                            key: "forces_action",
                            placeholder: "Situations concr√®tes o√π vos forces vous ont servi..."
                        },
                        {
                            label: "D√©fi hebdomadaire - Comment utilisez-vous vos forces de mani√®re nouvelle ?",
                            key: "defi_forces",
                            placeholder: "Actions concr√®tes pour activer vos forces au quotidien..."
                        }
                    ]
                }
            },
            {
                id: 7,
                title: "Devenir l'auteur de sa propre l√©gende",
                description: "Cr√©er le r√©cit inspirant de votre nouvelle vie",
                exercise: {
                    title: "R√©digez la Quatri√®me de Couverture de votre Prochain Chapitre",
                    objective: "Cr√©er un nouveau r√©cit personnel inspirant qui servira de boussole.",
                    questions: [
                        {
                            label: "Titre de votre Tome 2 - Comment nommez-vous votre nouveau chapitre ?",
                            key: "titre_tome2",
                            placeholder: "La Renaissance de [Votre Pr√©nom], Chroniques d'une Libert√© Retrouv√©e..."
                        },
                        {
                            label: "R√©sum√© inspirant - R√©digez la quatri√®me de couverture de votre vie",
                            key: "resume_inspirant",
                            placeholder: "Apr√®s avoir longtemps √©t√©... il/elle d√©cide maintenant de..."
                        },
                        {
                            label: "Vision personnelle - Qui voulez-vous devenir ?",
                            key: "vision_personnelle",
                            placeholder: "La transformation que vous envisagez, vos nouvelles mani√®res d'√™tre..."
                        }
                    ]
                }
            },
            {
                id: 8,
                title: "L'H√©ritage que nous laissons au Monde",
                description: "D√©finir votre contribution et donner du sens √† votre nouvelle vie",
                exercise: {
                    title: "D√©finir votre Contribution",
                    objective: "Identifier des pistes pour transformer vos talents en contributions au monde.",
                    questions: [
                        {
                            label: "Mes dons - Ce que vous avez √† offrir (talents, passions, forces)",
                            key: "mes_dons",
                            placeholder: "Synth√®se de vos d√©couvertes pr√©c√©dentes..."
                        },
                        {
                            label: "Les besoins - De quoi votre entourage/communaut√© a-t-il besoin ?",
                            key: "besoins_monde",
                            placeholder: "Besoins de lien social, transmission, aide pratique, beaut√©..."
                        },
                        {
                            label: "Id√©es de contribution - Comment connecter vos dons aux besoins ?",
                            key: "idees_contribution",
                            placeholder: "Projets concrets pour mettre vos talents au service des autres..."
                        }
                    ]
                }
            },
            {
                id: 9,
                title: "√âcouter les Murmures du Corps",
                description: "D√©velopper votre intelligence somatique et votre posture ressource",
                exercise: {
                    title: "Le Scan Corporel et la Posture Ressource",
                    objective: "D√©velopper votre √©coute corporelle et utiliser la posture comme levier.",
                    questions: [
                        {
                            label: "Messages du corps - Que vous dit votre corps sur votre √©tat actuel ?",
                            key: "messages_corps",
                            placeholder: "Tensions, sensations, zones de confort ou d'inconfort..."
                        },
                        {
                            label: "Posture ressource - D√©crivez votre posture du 'B√¢tisseur de Seconde Vie'",
                            key: "posture_ressource",
                            placeholder: "Comment vous tenez-vous quand vous incarnez votre nouveau moi ?"
                        },
                        {
                            label: "Exp√©riences corporelles - Comment votre corps r√©agit-il aux changements ?",
                            key: "experiences_corporelles",
                            placeholder: "Changements ressentis, nouvelles habitudes corporelles..."
                        }
                    ]
                }
            },
            {
                id: 10,
                title: "Tracer le Sentier d'une Nouvelle Aube",
                description: "Synth√©tiser votre parcours et cr√©er votre plan d'action",
                exercise: {
                    title: "Dessinez la Carte de votre Prochaine Aventure",
                    objective: "Cr√©er une vision concr√®te et un premier pas vers votre nouvelle vie.",
                    questions: [
                        {
                            label: "Manifeste personnel - Qui choisissez-vous d'√™tre maintenant ?",
                            key: "manifeste_personnel",
                            placeholder: "Vos valeurs directrices, votre mission, vos engagements envers vous-m√™me..."
                        },
                        {
                            label: "Semaine id√©ale - √Ä quoi ressemble une semaine √©panouissante pour vous ?",
                            key: "semaine_ideale",
                            placeholder: "R√©partition entre apprentissage, cr√©ation, contribution, corps, lien social..."
                        },
                        {
                            label: "Premier pas concret - Quelle action simple ferez-vous dans les 48h ?",
                            key: "premier_pas",
                            placeholder: "L'action la plus petite mais concr√®te pour d√©marrer..."
                        }
                    ]
                }
            }
        ];

        // Stockage des donn√©es
        let userData = JSON.parse(localStorage.getItem('retourSecondVieData')) || {};
        let completedChapters = JSON.parse(localStorage.getItem('completedChapters')) || [];

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            renderChapters();
            updateProgress();
            updateStats();
        });

        function renderChapters() {
            const grid = document.getElementById('chapterGrid');
            grid.innerHTML = '';

            chapters.forEach(chapter => {
                const isCompleted = completedChapters.includes(chapter.id);
                const isCurrent = !isCompleted && (completedChapters.length === 0 || completedChapters.length + 1 === chapter.id);
                
                const card = document.createElement('div');
                card.className = `chapter-card ${isCompleted ? 'completed' : ''} ${isCurrent ? 'current' : ''}`;
                card.onclick = () => openChapter(chapter);

                card.innerHTML = `
                    <div class="chapter-number">${isCompleted ? '‚úì' : chapter.id}</div>
                    <h3 class="chapter-title">${chapter.title}</h3>
                    <p class="chapter-description">${chapter.description}</p>
                    <div class="exercise-status">
                        <div class="status-icon ${isCompleted ? 'completed' : isCurrent ? 'current' : ''}">
                            ${isCompleted ? '‚úì' : isCurrent ? '!' : '?'}
                        </div>
                        <span>${isCompleted ? 'Exercice termin√©' : isCurrent ? '√Ä faire maintenant' : 'Exercice en attente'}</span>
                    </div>
                `;

                grid.appendChild(card);
            });
        }

        function openChapter(chapter) {
            const modal = document.getElementById('exerciseModal');
            const title = document.getElementById('modalTitle');
            const content = document.getElementById('modalContent');

            title.textContent = `Chapitre ${chapter.id}: ${chapter.exercise.title}`;
            
            content.innerHTML = `
                <div class="exercise-section">
                    <h3 class="exercise-title">Objectif:</h3>
                    <p>${chapter.exercise.objective}</p>
                </div>
                
                ${chapter.exercise.questions.map(q => `
                    <div class="question-group">
                        <label class="question-label">${q.label}</label>
                        <textarea 
                            id="${q.key}" 
                            placeholder="${q.placeholder}"
                        >${userData[q.key] || ''}</textarea>
                    </div>
                `).join('')}
                
                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn" onclick="saveChapterData(${chapter.id})">üíæ Sauvegarder</button>
                    <button class="btn btn-success" onclick="completeChapter(${chapter.id})">‚úÖ Marquer comme termin√©</button>
                    <button class="btn btn-secondary" onclick
